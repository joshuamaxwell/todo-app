function addTodo(a){todosArray.push(new Todo(a.title)),$(".js-todo-items-list").prepend(todoTemplate(_.last(todosArray))),updateStats()}function removeTodo(a){todosArray=_.reject(todosArray,function(b){return b.todoID===a}),$("#"+a).remove(),updateStats()}function completeTodo(a){for(i=0;i<todosArray.length;i++)todosArray[i].todoID===a&&(todosArray[i].completed===!1?(todosArray[i].completed=!0,$("#"+a).addClass("completed"),console.log("marking completed")):todosArray[i].completed===!0&&(todosArray[i].completed=!1,$("#"+a).removeClass("completed"),console.log("marking incomplete")));updateStats()}function beginEditingTodo(a){var b=$("#"+a+">.js-todo-title").text();$("#"+a+">.js-todo-title").replaceWith(todoTitleEditTemplate({title:b})),$("#"+a+">.js-todo-title").focus()}function finishEditingTodo(a){var b=$("#"+a+">.js-todo-title").val();removeTodo(a),addTodo({title:b}),updateStats()}function updateStats(){var a=todosArray.length,b=_.filter(todosArray,function(a){return a.completed===!0}).length,c=a-b;$(".js-todos-total").text("total: "+a),$(".js-todos-completed").text("completed: "+b),$(".js-todos-incomplete").text("incomplete: "+c)}var exampleTodos=["wash clothes","wash dishes","feed cat","learn grunt"];todosArray=[];var Todo=function(a){this.todoID=_.uniqueId("todoID"),this.title=a,this.completed=!1},todoTemplate=_.template($(".todo-template").text()),todoTitleTemplate=_.template($(".todo-title-template").text()),todoTitleEditTemplate=_.template($(".todo-title-edit-template").text());_.each(exampleTodos,function(a){addTodo({title:a})}),$(".js-add-new").on("click",function(){var a=$(".js-new-todo>input").val();$(".js-new-todo>input").val(""),addTodo({title:a})}),$(document).on("click",".js-not-editing",function(){var a=$(this).parent().attr("id");beginEditingTodo(a),$(this).toggleClass("js-editing"),$(this).toggleClass("js-not-editing")}),$(document).on("click",".js-editing",function(){var a=$(this).parent().attr("id");finishEditingTodo(a),$(this).toggleClass("js-editing"),$(this).toggleClass("js-not-editing")}),$(document).on("click",".js-todo-complete",function(){var a=$(this).parents(".js-todo-item").attr("id");completeTodo(a)}),$(document).on("click",".js-todo-remove",function(){var a=$(this).parents(".js-todo-item").attr("id");removeTodo(a)});